<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Minimal Chyster</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        #app { border: 2px solid #333; padding: 20px; min-height: 200px; background: #f0f0f0; }
        .status { padding: 10px; margin: 5px 0; border-radius: 3px; }
        .ok { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>Test Minimal Chyster Live App</h1>
    <p>√âtat du DOM: <span id="dom-state">Chargement...</span></p>
    <p>Container trouv√©: <span id="container-status">En attente...</span></p>
    
    <!-- APP CONTAINER - TR√àS IMPORTANT -->
    <div id="app" class="app-container">
        <p>üéØ Container app initial - En attente de chargement...</p>
    </div>
    
    <div id="logs" style="margin-top: 20px;"></div>

    <script>
        // Fonction pour logger
        function log(message, type = 'info') {
            console.log(message);
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.textContent = `${new Date().toLocaleTimeString()}: ${message}`;
            document.getElementById('logs').appendChild(div);
        }
        
        // V√©rifier l'√©tat du DOM imm√©diatement
        document.getElementById('dom-state').textContent = document.readyState;
        
        // V√©rifier si le container existe
        function checkContainer() {
            const container = document.getElementById('app');
            const statusEl = document.getElementById('container-status');
            
            if (container) {
                statusEl.textContent = '‚úÖ Trouv√©';
                statusEl.style.color = 'green';
                log('‚úÖ Container #app trouv√©', 'ok');
                return true;
            } else {
                statusEl.textContent = '‚ùå Non trouv√©';
                statusEl.style.color = 'red';
                log('‚ùå Container #app NON trouv√©', 'error');
                return false;
            }
        }
        
        // Test imm√©diat
        log('üîç Test imm√©diat du container');
        checkContainer();
        
        // Test apr√®s DOMContentLoaded
        if (document.readyState === 'loading') {
            log('üìÑ DOM en cours de chargement, attente de DOMContentLoaded');
            document.addEventListener('DOMContentLoaded', () => {
                log('üìÑ DOMContentLoaded d√©clench√©');
                document.getElementById('dom-state').textContent = document.readyState;
                checkContainer();
            });
        } else {
            log('üìÑ DOM d√©j√† pr√™t');
        }
        
        // Test p√©riodique
        let attempts = 0;
        const maxAttempts = 10;
        const testInterval = setInterval(() => {
            attempts++;
            log(`üîÑ Test p√©riodique ${attempts}/${maxAttempts}`);
            
            if (checkContainer() || attempts >= maxAttempts) {
                clearInterval(testInterval);
                if (attempts >= maxAttempts) {
                    log('‚ùå Container jamais trouv√© apr√®s 10 tentatives', 'error');
                }
            }
        }, 200);
    </script>
    
    <!-- Charger les scripts Chyster apr√®s les tests de base -->
    <script src="js/live-app-types.js"></script>
    <script src="js/live-app-core.js"></script>
    <script src="js/live-app-ui.js"></script>
    <script src="js/live-app.js"></script>
    
    <script>
        // Test final apr√®s chargement des scripts
        setTimeout(() => {
            log('üß™ Test final apr√®s chargement scripts');
            
            if (window.ChysterApp) {
                log('‚úÖ ChysterApp disponible', 'ok');
                
                // Test manuel d'initialisation
                try {
                    // Reset pour forcer la r√©initialisation
                    window.ChysterApp.initialized = false;
                    window.ChysterApp.init();
                    log('‚úÖ Initialisation manuelle r√©ussie', 'ok');
                } catch (error) {
                    log(`‚ùå Erreur initialisation manuelle: ${error.message}`, 'error');
                }
            } else {
                log('‚ùå ChysterApp non disponible', 'error');
            }
        }, 2000);
    </script>
</body>
</html>