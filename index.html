<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Chyster - Le jeu de cartes qui teste l'amiti√©. R√®gles officielles, conseils et d√©fis pour 2-10 joueurs.">
    <meta name="keywords" content="chyster, jeu de cartes, drinking game, amis, soir√©e">
    <meta name="theme-color" content="#FF2E63">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://chyster.fr/">
    <meta property="og:title" content="Chyster Corp 2016 - Le jeu qui teste l'amiti√©">
    <meta property="og:description" content="D√©couvrez les r√®gles officielles du Chyster, le jeu de cartes addictif jusqu'√† 10 joueurs.">
    
    <title>Chyster Corp 2016</title>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="css/style.css" as="style">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main" class="skip-link">Aller au contenu principal</a>
    
    <!-- Mobile-first header -->
    <header class="header" role="banner">
        <div class="container">
            <div class="header__brand">
                <h1 class="logo">
                    <span class="logo__text" aria-label="Chyster">CHYSTER</span>
                    <span class="logo__subtitle">Corp 2016</span>
                </h1>
            </div>
            <nav class="nav" role="navigation" aria-label="Menu principal">
                <button class="nav__toggle" aria-expanded="false" aria-controls="nav-menu" aria-label="Ouvrir le menu">
                    <span class="hamburger"></span>
                </button>
                <ul class="nav__menu" id="nav-menu">
                    <li><a href="#rules" class="nav__link">R√®gles</a></li>
                    <li><a href="#cards" class="nav__link">Cartes</a></li>
                    <li><a href="#start" class="nav__link">Commencer</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main id="main" role="main">
        <!-- Hero section - Mobile optimized -->
        <section class="hero" aria-label="Pr√©sentation du jeu">
            <div class="container">
                <div class="hero__content">
                    <h1 style="text-align: center; margin-bottom: 1rem;">
                        <span class="logo__text" aria-label="Chyster">CHYSTER</span>
                    </h1>
                    <h2 class="hero__title">
                        Le jeu qui teste 
                        <span class="highlight">l'amiti√©</span>
                    </h2>
                    <p class="hero__subtitle">
                        Posez vos cartes, atteignez la Chyster, et prouvez votre amiti√©... en faisant boire vos potes jusqu'√† l'oubli !
                    </p>
                    
                    <!-- Player counter - Touch optimized -->
                    <div class="player-selector" role="region" aria-label="S√©lection du nombre de joueurs">
                        <label for="player-count" class="player-selector__label">Joueurs</label>
                        <div class="player-selector__controls">
                            <button class="btn btn--counter" id="decrease-players" aria-label="Diminuer le nombre de joueurs">-</button>
                            <input type="number" id="player-count" class="player-count" value="4" min="2" max="10" readonly>
                            <button class="btn btn--counter" id="increase-players" aria-label="Augmenter le nombre de joueurs">+</button>
                        </div>
                        <div class="card-target" role="status" aria-live="polite">
                            <strong id="cards-needed">21</strong> cartes pour atteindre la Chyster
                            <div id="warning-message" class="warning-message" style="display: none;">
                                √Ä autant, √ßa risque d'√™tre le bordel (on t'aura pr√©venu)
                            </div>
                        </div>
                    </div>

                    <div class="cta-group">
                        <a href="#start" class="btn btn--primary">Commencer √† jouer</a>
                        <a href="#rules" class="btn btn--secondary">Voir les r√®gles</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quick start - Mobile first -->
        <section id="start" class="quick-start" aria-label="Guide de d√©marrage rapide">
            <div class="container">
                <h2 class="section-title">D√©marrage rapide</h2>
                <div class="steps">
                    <div class="step">
                        <div class="step__number" aria-hidden="true">1</div>
                        <div class="step__content">
                            <h3 class="step__title">Rassemblez-vous</h3>
                            <p>2 √† 10 joueurs, un jeu de 52 cartes</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step__number" aria-hidden="true">2</div>
                        <div class="step__content">
                            <h3 class="step__title">Choisissez un dealer</h3>
                            <p>Celui qui m√®nera la partie</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step__number" aria-hidden="true">3</div>
                        <div class="step__content">
                            <h3 class="step__title">C'est parti !</h3>
                            <p>Piochez, choisissez, atteignez la Chyster</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Rules section - Decision tree design -->
        <section id="rules" class="rules" aria-label="R√®gles du jeu">
            <div class="container">
                <h2 class="section-title">R√®gles essentielles</h2>
                
                <!-- Card order explanation -->
                <div class="card-order-section">
                    <h3>üÇ° Ordre des cartes</h3>
                    <p class="card-order-text">
                        <strong>AS = 1</strong> (sauf effet sp√©cial), puis <strong>2 ‚Üí 10 ‚Üí Valet (V) ‚Üí Dame (D)</strong>.<br>
                        Le <strong>Roi (R)</strong> est un joker : il se pose au-dessus de la rang√©e et ne compte pas pour la Chyster.
                    </p>
                </div>
                
                <p class="rules-intro">Dans quelle situation √™tes-vous ?</p>
                
                <!-- Game flow timeline -->
                <div class="game-timeline">
                    <!-- √âtape 1 -->
                    <div class="timeline-step accordion-step" id="step-situation">
                        <button class="step-header accordion-header" aria-expanded="false" aria-controls="step-situation-content">
                            <div class="step-number">1</div>
                            <h3 class="step-title">ü§î D√âBUT DE TOUR</h3>
                            <span class="accordion-icon">‚ñº</span>
                        </button>
                        <div class="step-content accordion-content" id="step-situation-content" style="display: none;">
                            <p class="step-question">Avez-vous des cartes d√©j√† pos√©es ?</p>
                            
                            <div class="choice-branches">
                                <div class="branch branch-a">
                                    <div class="branch-header">
                                        <span class="branch-label">NON</span>
                                    </div>
                                    <div class="branch-content">
                                        <h4>üìã ANNONCEZ VOTRE PR√âDICTION</h4>
                                        <div class="color-choices">
                                            <span class="color-choice">üî¥ Rouge</span>
                                            <div class="choice-or">OU</div>
                                            <span class="color-choice">‚ö´ Noir</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="branch branch-b">
                                    <div class="branch-header">
                                        <span class="branch-label">OUI</span>
                                    </div>
                                    <div class="branch-content">
                                        <h4>üéØ CHOIX STRAT√âGIQUE</h4>
                                        <div class="strategic-choices">
                                            <div class="choice-option">
                                                <h5>üî¥‚ö´ ROUGE OU NOIR</h5>
                                                <p>(deviner)</p>
                                            </div>
                                            <div class="choice-or">OU</div>
                                            <div class="choice-option">
                                                <h5>üçª DISTRIBUER</h5>
                                                <p>gorg√©es (= nombre de cartes d√©j√† pos√©es) √† un SEUL joueur</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- √âtape 2 -->
                    <div class="timeline-step accordion-step" id="step-result">
                        <button class="step-header accordion-header" aria-expanded="false" aria-controls="step-result-content">
                            <div class="step-number">2</div>
                            <h3 class="step-title">üé∞ R√âSULTAT</h3>
                            <span class="accordion-icon">‚ñº</span>
                        </button>
                        <div class="step-content accordion-content" id="step-result-content" style="display: none;">
                            <div class="result-outcomes">
                                <div class="outcome outcome-success">
                                    <h4>‚úÖ BONNE COULEUR</h4>
                                    <div class="choice-option">
                                        <p>‚Üí Posez la carte avec vos cartes d√©j√† pos√©es (en haut de votre rang√©e)</p>
                                    </div>
                                    <div class="choice-option">
                                        <p>‚Üí On passe au joueur suivant</p>
                                    </div>
                                </div>

                                <div class="outcome outcome-failure">
                                    <h4>‚ùå MAUVAISE COULEUR</h4>
                                    
                                    <div class="failure-scenario">
                                        <h5>Pas de cartes d√©j√† pos√©es</h5>
                                        <div class="choice-option">
                                            <p>‚Üí Buvez une gorg√©e</p>
                                        </div>
                                        <div class="choice-option">
                                            <p>‚Üí Carte sp√©ciale pioch√©e ? <a href="#special-cards" class="special-link">Voir exemple interactif</a></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- La Chyster -->
                    <div class="timeline-step timeline-step--chyster accordion-step" id="step-chyster">
                        <button class="step-header accordion-header" aria-expanded="false" aria-controls="step-chyster-content">
                            <div class="step-number">üèÜ</div>
                            <h3 class="step-title">LA CHYSTER</h3>
                            <span class="accordion-icon">‚ñº</span>
                        </button>
                        <div class="step-content accordion-content" id="step-chyster-content" style="display: none;">
                            <div class="chyster-objective">
                                <h4>üéØ OBJECTIF</h4>
                                <p>Atteignez le nombre de cartes requis pour votre groupe</p>
                            </div>

                            <div class="chyster-power">
                                <h4>üí• POUVOIR CHYSTER</h4>
                                <div class="choice-option">
                                    <p>‚Üí Distribuez TOUTES vos gorg√©es √† 1 seul joueur (1 carte = 1 gorg√©e)</p>
                                </div>
                                <div class="choice-option">
                                    <p>‚Üí D√©truisez l'ENSEMBLE de son jeu (rang√©e de cartes + jokers)</p>
                                </div>
                            </div>

                            <div class="chyster-royale">
                                <h4>‚ú® CHYSTER ROYALE</h4>
                                <p>M√™me couleur sur toutes vos cartes = <strong>Distribution x2</strong> et <strong>destruction de 2 jeux !</strong></p>
                            </div>

                            <div style="text-align: center; margin-top: 20px;">
                                <p><em>√Ä chaque Chyster, le dealer est dans l'obligation de m√©langer le paquet.</em></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Special cards section - Detailed -->
        <section id="cards" class="special-cards" aria-label="Cartes sp√©ciales">
            <div class="container">
                <h2 class="section-title">üÉè <em>Cartes sp√©ciales</em> <small><em>(effet + comportement en jeu)</em></small></h2>
                
                <div class="special-cards-detailed">
                    <!-- Valet -->
                    <div class="special-card-detail">
                        <div class="card-header">
                            <div class="card-visual">
                                <span class="card-rank">V</span>
                                <span class="card-suit">‚ô†</span>
                            </div>
                            <h3>Valet (V)</h3>
                        </div>
                        <div class="card-content">
                            <div class="card-effect">
                                <h4>Effet</h4>
                                <p>D√©signe 2 personnes pour un shifu-bois (pierre-feuille-ciseaux ; perdant boit).</p>
                            </div>
                            <div class="card-behavior">
                                <h4>En jeu</h4>
                                <p>Ne compte pas comme un essai ‚Üí tu actives l'effet, tu d√©fausses le Valet puis repioche.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Dame -->
                    <div class="special-card-detail">
                        <div class="card-header">
                            <div class="card-visual card-visual--red">
                                <span class="card-rank">D</span>
                                <span class="card-suit">‚ô•</span>
                            </div>
                            <h3>Dame (D)</h3>
                        </div>
                        <div class="card-content">
                            <div class="card-effect">
                                <h4>Effet</h4>
                                <p>Le dernier √† dire "pute" boit.</p>
                                <small class="card-note">"Le mot peut √™tre chang√© si tu joues avec des enfants"</small>
                            </div>
                            <div class="card-behavior">
                                <h4>En jeu</h4>
                                <p>Ne compte pas comme un essai ‚Üí tu actives l'effet, tu d√©fausses la Dame puis repioche.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Roi -->
                    <div class="special-card-detail special-card-detail--premium">
                        <div class="card-header">
                            <div class="card-visual">
                                <span class="card-rank">R</span>
                                <span class="card-suit">‚ô†</span>
                            </div>
                            <h3>Roi (R)</h3>
                        </div>
                        <div class="card-content">
                            <div class="card-effect">
                                <h4>Effet</h4>
                                <p>Victoire automatique (ind√©pendamment de la couleur annonc√©e).</p>
                            </div>
                            <div class="card-placement">
                                <h4>Placement</h4>
                                <p>Se pose au-dessus de ta rang√©e (ne compte pas pour la Chyster).</p>
                            </div>
                            <div class="card-power">
                                <h4>Pouvoir</h4>
                                <ul>
                                    <li>Peut te permettre de r√©essayer de deviner la bonne couleur quand tu devrais perdre.</li>
                                    <li>Ne compte jamais pour la Chyster.</li>
                                    <li>Se d√©fausse une fois utilis√©</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- As -->
                    <div class="special-card-detail special-card-detail--premium">
                        <div class="card-header">
                            <div class="card-visual card-visual--red">
                                <span class="card-rank">A</span>
                                <span class="card-suit">‚ô¶</span>
                            </div>
                            <h3>As (A)</h3>
                        </div>
                        <div class="card-content">
                            <div class="card-effect">
                                <h4>Effet</h4>
                                <p>Victoire automatique (ind√©pendamment de la couleur annonc√©e).</p>
                            </div>
                            <div class="card-choice">
                                <h4>Choix</h4>
                                <ul>
                                    <li><strong>AS = 1</strong> dans ton jeu, ou</li>
                                    <li><strong>AS = 10</strong> dans le jeu d'un autre (malus).</li>
                                </ul>
                                <p class="choice-note">‚Üí Ne compte PAS comme une carte pos√©e dans la rang√©e. Il remplace la derni√®re carte pos√©e</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Special cards interactive example -->
        <section id="special-cards" class="special-example" aria-label="Exemple carte sp√©ciale">
            <div class="container">
                <h2 class="section-title">Exemple carte sp√©ciale</h2>
                <p class="example-intro">D√©monstration interactive du comportement des cartes sp√©ciales</p>
                
                <!-- Interactive demo -->
                <div class="interactive-demo">
                    <h3>S√©quence de jeu avec exemples</h3>
                    <p class="demo-intro">Suivez cette s√©quence pour comprendre le syst√®me d'essais et les cartes sp√©ciales</p>
                    
                    <!-- Slider interactif -->
                    <div class="game-slider" role="region" aria-label="Exemple de s√©quence de jeu">
                        <div class="slider-container">
                            <div class="slider-track" id="sliderTrack">
                                <!-- √âtape 1 - Premier essai -->
                                <div class="slider-step active" data-step="1">
                                    <div class="step-header">
                                        <h4>√âtape 1 - Premier essai</h4>
                                        <div class="attempts-counter">
                                            <span class="attempts-text">Essais restants :</span>
                                            <span class="attempts-number">3/3</span>
                                        </div>
                                    </div>
                                    <div class="step-content">
                                        <div class="context-info">
                                            <p class="last-card">Votre derni√®re carte pos√©e est un <strong>5 de tr√®fle</strong></p>
                                        </div>
                                        <div class="prediction">
                                            <p>Vous annoncez : <strong class="color-choice">ROUGE</strong></p>
                                        </div>
                                        <div class="card-reveal">
                                            <div class="card-container">
                                                <div class="card card--back" id="card1">
                                                    <div class="card-front">?</div>
                                                </div>
                                            </div>
                                            <button class="reveal-btn" onclick="revealCard(1, 'black', '7‚ô†')">Retourner la carte</button>
                                        </div>
                                        <div class="result-message" id="result1" style="display: none;">
                                            <span class="result-icon">‚ùå</span>
                                            <span class="result-text">Mauvaise couleur ! Carte noire (7‚ô†) mais chiffre sup√©rieur √† votre pr√©c√©dente carte, vous pouvez rejouer, il vous reste 2 essais pour r√©ussir √† trouver la bonne couleur</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- √âtape 2 - Valet sp√©cial -->
                                <div class="slider-step" data-step="2">
                                    <div class="step-header">
                                        <h4>√âtape 2 - Valet sp√©cial</h4>
                                        <div class="attempts-counter">
                                            <span class="attempts-text">Essais restants :</span>
                                            <span class="attempts-number">2/3</span>
                                        </div>
                                    </div>
                                    <div class="step-content">
                                        <div class="context-info">
                                            <p class="last-card">Votre derni√®re carte pos√©e est un <strong>5 de tr√®fle</strong></p>
                                        </div>
                                        <div class="prediction">
                                            <p>Vous annoncez : <strong class="color-choice">NOIR</strong></p>
                                        </div>
                                        <div class="card-reveal">
                                            <div class="card-container">
                                                <div class="card card--back" id="card2">
                                                    <div class="card-front">?</div>
                                                </div>
                                            </div>
                                            <button class="reveal-btn" onclick="revealCard(2, 'red', 'V‚ô•')">Retourner la carte</button>
                                        </div>
                                        <div class="result-message" id="result2" style="display: none;">
                                            <span class="result-icon">üÉè</span>
                                            <span class="result-text">Valet ! Carte sp√©ciale - D√©signez 2 personnes pour un shifu-bois. Ne compte pas comme un essai ‚Üí d√©fausse et repioche.</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- √âtape 3 - Succ√®s -->
                                <div class="slider-step" data-step="3">
                                    <div class="step-header">
                                        <h4>√âtape 3 - Succ√®s !</h4>
                                        <div class="attempts-counter">
                                            <span class="attempts-text">Essais restants :</span>
                                            <span class="attempts-number">2/3</span>
                                        </div>
                                    </div>
                                    <div class="step-content">
                                        <div class="context-info">
                                            <p class="last-card">Votre derni√®re carte pos√©e est un <strong>5 de tr√®fle</strong></p>
                                        </div>
                                        <div class="prediction">
                                            <p>Vous annoncez : <strong class="color-choice">NOIR</strong></p>
                                        </div>
                                        <div class="card-reveal">
                                            <div class="card-container">
                                                <div class="card card--back" id="card3">
                                                    <div class="card-front">?</div>
                                                </div>
                                            </div>
                                            <button class="reveal-btn" onclick="revealCard(3, 'black', '9‚ô†')">Retourner la carte</button>
                                        </div>
                                        <div class="result-message" id="result3" style="display: none;">
                                            <span class="result-icon">‚úÖ</span>
                                            <span class="result-text">Bonne couleur ! Vous posez la carte dans votre jeu. Votre tour est termin√©, c'est au joueur suivant !</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- √âtape 4 - Cas d'√©chec total -->
                                <div class="slider-step" data-step="4">
                                    <div class="step-header">
                                        <h4>√âtape 4 - Cas d'√©chec total</h4>
                                        <div class="attempts-counter attempts-counter--danger">
                                            <span class="attempts-text">Essais restants :</span>
                                            <span class="attempts-number">0/3</span>
                                        </div>
                                    </div>
                                    <div class="step-content">
                                        <div class="failure-scenario">
                                            <h5>Si vous aviez √©chou√© 3 fois...</h5>
                                            <div class="failure-consequence">
                                                <span class="result-icon">üíÄ</span>
                                                <p>Vous auriez bu autant de gorg√©es que vous aviez de cartes pos√©es</p>
                                                <p><strong>‚Üí D√©fausse toute ta rang√©e (joker compris).</strong></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Navigation du slider -->
                        <div class="slider-nav">
                            <button class="slider-btn slider-btn--prev" onclick="previousStep()" aria-label="√âtape pr√©c√©dente">
                                ‚Äπ Pr√©c√©dent
                            </button>
                            <div class="slider-indicators">
                                <span class="indicator active" data-step="1" onclick="goToStep(1)"></span>
                                <span class="indicator" data-step="2" onclick="goToStep(2)"></span>
                                <span class="indicator" data-step="3" onclick="goToStep(3)"></span>
                                <span class="indicator" data-step="4" onclick="goToStep(4)"></span>
                            </div>
                            <button class="slider-btn slider-btn--next" onclick="nextStep()" aria-label="√âtape suivante">
                                Suivant ‚Ä∫
                            </button>
                        </div>
                        
                        <div class="slider-actions">
                            <button class="btn btn--secondary" onclick="resetDemo()">
                                üîÑ Rejouer la s√©quence
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Mobile-first footer -->
    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer__content">
                <p class="footer__text">
                    <strong>Chyster Corp 2016</strong><br>
                    Buvez avec mod√©ration üçª
                </p>
                <p class="footer__legal">
                    <small>Ce jeu est destin√© aux adultes. Respectez les lois locales.</small>
                </p>
            </div>
        </div>
    </footer>

    <!-- Scripts optimized for mobile -->
    <script src="js/mobile-app.js" defer></script>
    
    <!-- Interactive slider script -->
    <script>
        let currentStep = 1;
        const totalSteps = 4;
        let revealedCards = new Set();

        function updateSliderPosition() {
            const track = document.getElementById('sliderTrack');
            if (track) {
                const translateX = -(currentStep - 1) * 25; // 25% per step
                track.style.transform = `translateX(${translateX}%)`;
            }
        }

        function updateNavigation() {
            // Update buttons
            const prevBtn = document.querySelector('.slider-btn--prev');
            const nextBtn = document.querySelector('.slider-btn--next');
            
            if (prevBtn) prevBtn.disabled = currentStep === 1;
            if (nextBtn) nextBtn.disabled = currentStep === totalSteps;
            
            // Update indicators
            document.querySelectorAll('.indicator').forEach((indicator, index) => {
                const isActive = index + 1 === currentStep;
                indicator.classList.toggle('active', isActive);
            });
            
            // Update step visibility
            document.querySelectorAll('.slider-step').forEach((step, index) => {
                const isActive = index + 1 === currentStep;
                step.classList.toggle('active', isActive);
            });
        }

        function goToStep(stepNumber) {
            if (stepNumber < 1 || stepNumber > totalSteps) return;
            currentStep = stepNumber;
            updateSliderPosition();
            updateNavigation();
            
            // Auto-reveal card after a short delay if not already revealed
            setTimeout(() => {
                autoRevealCard(stepNumber);
            }, 800);
        }

        function autoRevealCard(stepNumber) {
            // Only auto-reveal for steps 1, 2, and 3 (not the failure scenario step 4)
            if (stepNumber >= 1 && stepNumber <= 3) {
                const cardId = `card${stepNumber}`;
                const resultId = `result${stepNumber}`;
                const card = document.getElementById(cardId);
                const result = document.getElementById(resultId);
                const button = document.querySelector(`#${cardId} + .card-container + .reveal-btn`) || 
                              document.querySelector(`.slider-step[data-step="${stepNumber}"] .reveal-btn`);
                
                // Only auto-reveal if not already revealed
                if (card && result && button && !revealedCards.has(stepNumber) && !button.disabled) {
                    // Define card data for each step
                    const cardData = {
                        1: { color: 'black', value: '7‚ô†' },
                        2: { color: 'red', value: 'V‚ô•' },
                        3: { color: 'black', value: '9‚ô†' }
                    };
                    
                    const data = cardData[stepNumber];
                    if (data) {
                        revealCardInternal(stepNumber, data.color, data.value, button);
                    }
                }
            }
        }

        function revealCardInternal(cardNumber, color, cardValue, button) {
            const card = document.getElementById(`card${cardNumber}`);
            const result = document.getElementById(`result${cardNumber}`);
            
            if (!card || !result || !button) return;
            
            // Disable button
            button.disabled = true;
            button.textContent = 'Carte r√©v√©l√©e';
            
            // Add revealed card to set
            revealedCards.add(cardNumber);
            
            // Animate card flip
            setTimeout(() => {
                // Update card content
                const cardFront = card.querySelector('.card-front');
                cardFront.textContent = cardValue;
                cardFront.classList.add(color === 'red' ? 'card-front--red' : 'card-front--black');
                
                // Flip card
                card.classList.add('card--flipped');
                
                // Show result with appropriate styling
                result.style.display = 'block';
                result.classList.remove('result-message--success', 'result-message--error', 'result-message--special');
                
                if (cardValue.includes('V')) {
                    result.classList.add('result-message--special');
                } else if (cardNumber === 1) {
                    result.classList.add('result-message--error');
                } else if (cardNumber === 3) {
                    result.classList.add('result-message--success');
                }
                
            }, 200);
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                goToStep(currentStep + 1);
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                goToStep(currentStep - 1);
            }
        }

        function revealCard(cardNumber, color, cardValue) {
            const button = event.target;
            // Use the internal reveal function for manual reveals too
            revealCardInternal(cardNumber, color, cardValue, button);
        }

        function resetDemo() {
            currentStep = 1;
            revealedCards.clear();
            
            // Reset all cards
            document.querySelectorAll('.card').forEach(card => {
                card.classList.remove('card--flipped');
                const cardFront = card.querySelector('.card-front');
                cardFront.textContent = '?';
                cardFront.classList.remove('card-front--red', 'card-front--black');
            });
            
            // Hide all result messages
            document.querySelectorAll('.result-message').forEach(result => {
                result.style.display = 'none';
            });
            
            // Reset buttons
            document.querySelectorAll('.reveal-btn').forEach(btn => {
                btn.disabled = false;
                btn.textContent = 'Retourner la carte';
            });
            
            updateSliderPosition();
            updateNavigation();
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.target.closest('.game-slider')) {
                switch (e.key) {
                    case 'ArrowLeft':
                        e.preventDefault();
                        previousStep();
                        break;
                    case 'ArrowRight':
                        e.preventDefault();
                        nextStep();
                        break;
                }
            }
        });

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            updateSliderPosition();
            updateNavigation();
            // Auto-reveal the first card after a short delay
            setTimeout(() => {
                autoRevealCard(1);
            }, 1000);
        });
    </script>
</body>
</html>